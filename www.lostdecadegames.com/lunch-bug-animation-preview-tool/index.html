<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Play around with the Lunch Bug animation preview tool - Lost Decade Games</title>
	<meta name="description" content="Official website of Lost Decade Games, an independent HTML5 game company in Silicon Valley, CA.">
	<meta name="keywords" content="html5 games, javascript, chrome webstore, game dev, open source, blog, git, github, lost decade games, matt hackett, richtaur, geoff blair, gosub, zylo">
	<link rel="alternate" type="application/atom+xml" title="ATOM Feed for Lost Decade Games" href="http://www.lostdecadegames.com/rss.xml">
	<link rel="shortcut icon" href="/favicon.ico">
	<link rel="stylesheet" type="text/css" href="/media/css/combo.css?v1">
</head>
<body>
	<div id="hd">
	<h1>
		<a href="/">Lost Decade Games</a>
	</h1>
	<ul id="nav">
		<li><a href="/about/">About</a></li>
		<li><a href="/lostcast/">Lostcast</a></li>
		<li><a href="http://forum.lostdecadegames.com/">Forum</a></li>
		<li><a class="focal-point" href="http://www.wizardslizard.com/">A Wizard's Lizard</a></li>
	</ul>
</div>

<ul id="social">
	<li><a class="youtube" href="http://www.youtube.com/LostDecadeGames" title="YouTube">YouTube</a></li>
	<!--li><a class="apple" href="http://itunes.apple.com/us/podcast/lostcast/id481950724" title="iTunes">iTunes</a></li-->
	<li><a class="twitter" href="https://twitter.com/LostDecadeGames" title="Twitter">Twitter</a></li>
	<li><a class="email" href="/mailing-list/" title="Mailing List">Mailing List</a></li>
	<li><a class="rss" href="/rss.xml" title="RSS">RSS</a></li>
</ul>

<!-- Author -->

	


<!-- Splash -->

	


<div class="splash laptop">
	<div>
		<h2>Play around with the Lunch Bug animation preview tool</h2>
		<em>by Matt Hackett, 2012 Apr 11</em>
	</div>
</div>

<div class="section text blog">
<p>
	<strong>Update:</strong> added frame rate controls!
</p>

<p>
	I've been heads-down on art for our upcoming free-to-play game <strong>Lunch Bug</strong> and I thought I'd take a break to show you a little tool I just put together to improve my process. Have a look:
</p>

<div class="full-frame">
	<iframe frameborder="0" src="/demos/lunch_bug_animation_preview/" width="400" height="300"></iframe>
</div>

<p>
	<em>Please note that this is just the first draft of animations. Improvements are on the way!</em>
</p>

<h2>
	Interact with it
</h2>

<p>
	In the center of the canvas is a game piece from <strong>Lunch Bug</strong>. The text in the upper-left can be pressed to play animations:
</p>

<ul>
	<li><strong>Put</strong>: this is the animation that will play when the user puts a new piece on the board.</li>
	<li><strong>Idle</strong>: "idle" is what we're calling animations that will play randomly when no user interaction has happened for a while. Think Sonic the Hedgehog tapping his foot!</li>
	<li><strong>Grow</strong>: seedlings and bulbs can grow into <strong>berries</strong>, which are worth the most points in the game.</li>
	<li><strong>Shrink</strong>: berries and bulbs can be shrunk (shrank? shrenk?) into pieces worth fewer points if players aren't careful!</li>
</ul>

<p>
	In <strong>Lunch Bug</strong>, pieces can be "captured" by being surrounded, which changes their appearance.
	Normally I could just have had a giant sprite sheet with all the images for the various types of plants, but we can't have any images larger than 1024x1024 pixels due to <strong>mobile memory restraints</strong>, which meant breaking them up into multiple files.
</p>

<p>
	The complication of switching the image file part-way through the animations made using traditional animation tools difficult.
	That's why I built this tool!
	Now that I've got it, I'll be going back and iterating a few more times before the final version, so at this point <a href="/contact/">feedback</a> is especially valuable.
</p>

<h2>
	Where's the code?
</h2>

<p>
	Normally I'd be open sourcing this on the <a href="https://github.com/lostdecade">Lost Decade Games GitHub account</a> but it's tightly coupled to our internal game engine. We may open source the engine and its tools eventually but it's getting bulldozed too often to even consider it at the moment. What I <em>can</em> do is copypasta the code so you can get a general idea:
</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript">define([
	&quot;djinn/Game&quot;,
	&quot;djinn/assets&quot;,
	&quot;djinn/Sprite&quot;,
	&quot;djinn/TextView&quot;,
	&quot;djinn/utils/viewEffects&quot;
], function (Game, assets, Sprite, TextView, effects) {

	return Game.extend({

		init: function (conf) {
			// Conf
			this._super(conf);
			this.view.backgroundColor = &quot;white&quot;;

			// Pull in the assets we need
			assets.load([
				&quot;media/images/seedling.png&quot;,
				&quot;media/images/bulb.png&quot;,
				&quot;media/images/berry.png&quot;
			]);

			// Create the sprite subject
			var state = &quot;seedling&quot;;
			var w = 100;
			var h = 100;
			this.sprite = new Sprite({
				parent: this.view,
				image: &quot;media/images/seedling.png&quot;,
				x: 0,
				y: 0,
				width: w,
				height: h,
				animations: {
					&quot;default&quot;: {
						frames: [
							[0, 0]
						]
					},
					&quot;put&quot;: {
						frameRate: 5,
						frames: [
							[w * 4, 0],
							[w * 3, 0],
							[w * 2, 0],
							[w, 0],
							[0, 0]
						],
						loop: false
					},
					&quot;idle&quot;: {
						frameRate: 12,
						frames: [
							[0, h],
							[w, h],
							[w * 2, h],
							[w * 3, h],
							[w * 4, h]
						],
						loop: false
					},
					&quot;grow&quot;: {
						frameRate: 8,
						frames: [
							[0, h * 2],
							[w, h * 2],
							[w * 2, h * 2],
							[w * 3, h * 2],
							[w * 4, h * 2]
						],
						loop: false
					},
					&quot;shrink&quot;: {
						frameRate: 8,
						frames: [
							[w * 4, h * 2],
							[w * 3, h * 2],
							[w * 2, h * 2],
							[w, h * 2],
							[0, h * 2]
						],
						loop: false
					}
				}
			}).align(&quot;center&quot;, &quot;center&quot;);

			var x = 10;
			var height = TextView.defaults.fontSize = 32;

			// Put
			var putView = new TextView({
				parent: this.view,
				text: &quot;Put&quot;,
				x: x,
			}).align(&quot;center&quot;).on(&quot;inputStart&quot;, this, function () {
				// Setup
				this.sprite.completeTween();
				this.sprite.opacity = 0;

				// Execute
				this.sprite.playAnimation(&quot;put&quot;);
				effects.fadeIn(this.sprite, {
					duration: 500
				});
			});

			// Idle
			var idleView = new TextView({
				parent: this.view,
				text: &quot;Idle&quot;,
				x: x,
				y: height
			}).align(&quot;center&quot;).on(&quot;inputStart&quot;, this, function () {
				this.sprite.playAnimation(&quot;idle&quot;);
			});

			// Grow
			var growView = new TextView({
				parent: this.view,
				text: &quot;Grow&quot;,
				x: x,
				y: height * 2
			}).align(&quot;center&quot;).on(&quot;inputStart&quot;, this, function () {
				if (state == &quot;berry&quot;) { return; }

				var onAnimationEnd = function () {
					this.sprite.off(&quot;animationEnd&quot;, this, onAnimationEnd);

					if (state == &quot;seedling&quot;) {
						state = &quot;bulb&quot;;
						this.sprite.image = &quot;media/images/bulb.png&quot;;
					} else {
						state = &quot;berry&quot;;
						this.sprite.image = &quot;media/images/berry.png&quot;;
					}
					this.sprite.playAnimation(&quot;default&quot;);
				};

				this.sprite.on(&quot;animationEnd&quot;, this, onAnimationEnd);
				this.sprite.playAnimation(&quot;grow&quot;);
			});

			// Shrink
			var shrinkView = new TextView({
				parent: this.view,
				text: &quot;Shrink&quot;,
				x: x,
				y: height * 3
			}).align(&quot;center&quot;).on(&quot;inputStart&quot;, this, function () {
				if (state == &quot;seedling&quot;) { return; }

				if (state == &quot;berry&quot;) {
					state = &quot;bulb&quot;;
					this.sprite.image = &quot;media/images/bulb.png&quot;;
				} else {
					state = &quot;seedling&quot;;
					this.sprite.image = &quot;media/images/seedling.png&quot;;
				}

				var onAnimationEnd = function () {
					this.sprite.off(&quot;animationEnd&quot;, this, onAnimationEnd);

					this.sprite.playAnimation(&quot;default&quot;);
				};

				this.sprite.on(&quot;animationEnd&quot;, this, onAnimationEnd);
				this.sprite.playAnimation(&quot;shrink&quot;);
			});
		}

	});

});</code></pre></div>

<p>
	<em>Might be easier to read in <a href="https://gist.github.com/2364515">this gist</a>.</em> Note that the tool is not very robust as I didn't want to spend too much time on it…
</p>

<p>
	More <strong>Lunch Bug</strong> news is just around the corner (can you say playable prototype?!) so be sure to <a href="http://www.lostdecadegames.com/rss.xml">subscribe</a> to get it when it's hot. Thanks for reading!
</p>


	<p>
		<a class="download-podcast" href="http://twitter.com/richtaur">Follow author @richtaur</a>
	</p>
</div>

<div class="section text">
	
		<div class="module">
	<!-- Begin Disqus comments -->
	<div id="disqus_thread"></div>
	<script type="text/javascript">
		var disqus_shortname = "lostdecadegames";
		var disqus_identifier = "/lunch-bug-animation-preview-tool";
		var disqus_url = "http://www.lostdecadegames.com/lunch-bug-animation-preview-tool";
		/* * * DON'T EDIT BELOW THIS LINE * * */
		(function() {
			var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
			(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		})();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	<!-- End Disqus comments -->
</div>

	
</div>


<div id="ft">
	<p>
		Lost Decade Games © 2015
		• <a href="/blog/">Blog</a>
		• <a href="/about/tos/">Terms of Service</a>
		• <a href="/about/video-policy/">Video Policy</a>
	</p>
</div>

	<!-- Begin Google Analytics -->
<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-16927444-7']);
	_gaq.push(['_trackPageview']);
	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
<!-- End Google Analytics -->

</body>
</html>
