<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>What we need to get our HTML5 game on iPad - Lost Decade Games</title>
	<meta name="description" content="Official website of Lost Decade Games, an independent HTML5 game company in Silicon Valley, CA.">
	<meta name="keywords" content="html5 games, javascript, chrome webstore, game dev, open source, blog, git, github, lost decade games, matt hackett, richtaur, geoff blair, gosub, zylo">
	<link rel="alternate" type="application/atom+xml" title="ATOM Feed for Lost Decade Games" href="http://www.lostdecadegames.com/rss.xml">
	<link rel="shortcut icon" href="/favicon.ico">
	<link rel="stylesheet" type="text/css" href="/media/css/combo.css?v1">
</head>
<body>
	<div id="hd">
	<h1>
		<a href="/">Lost Decade Games</a>
	</h1>
	<ul id="nav">
		<li><a href="/about/">About</a></li>
		<li><a href="/lostcast/">Lostcast</a></li>
		<li><a href="http://forum.lostdecadegames.com/">Forum</a></li>
		<li><a class="focal-point" href="http://www.wizardslizard.com/">A Wizard's Lizard</a></li>
	</ul>
</div>

<ul id="social">
	<li><a class="youtube" href="http://www.youtube.com/LostDecadeGames" title="YouTube">YouTube</a></li>
	<!--li><a class="apple" href="http://itunes.apple.com/us/podcast/lostcast/id481950724" title="iTunes">iTunes</a></li-->
	<li><a class="twitter" href="https://twitter.com/LostDecadeGames" title="Twitter">Twitter</a></li>
	<li><a class="email" href="/mailing-list/" title="Mailing List">Mailing List</a></li>
	<li><a class="rss" href="/rss.xml" title="RSS">RSS</a></li>
</ul>

<!-- Author -->

	


<!-- Splash -->

	


<div class="splash laptop">
	<div>
		<h2>What we need to get our HTML5 game on iPad</h2>
		<em>by Matt Hackett, 2011 Mar 17</em>
	</div>
</div>

<div class="section text blog">
<a class="after" href="http://www.flickr.com/photos/50655575@N03/5533389193/">
	<img alt="Onslaught! Arena on iPad" src="http://farm6.static.flickr.com/5014/5533389193_33d84a9947_m.jpg">
</a>

<p>
	One of our attractions to HTML5 is its portability.
	Our game <a href="http://www.lostdecadegames.com/onslaught_arena">Onslaught! Arena</a>
	began as a browser-based app but has since
	<a href="http://www.lostdecadegames.com/an-html5-game-in-the-mac-app-store">moved into native land</a>
	by embedding a WebKit Web View into
	<a href="http://itunes.apple.com/us/app/onslaught-arena/id418268106">our OSX app</a>.
</p>

<p>
	Given <a href="http://www.lostdecadegames.com/how-to-embed-html5-into-a-native-mac-osx-app">how easy it was</a>
	to get our game onto the Mac App Store, the next obvious question is, "What about iPad?"
	We've been exploring it and are sad to report that we've hit a brick wall of sorts.
</p>

<p>
	HTML5 Audio is a disaster on iPad; only one sound file can play at a time, in addition to latency and other issues.
	Not to pick on iPad or Apple -- HTML5 Audio
	<a href="http://www.phoboslab.org/log/2011/03/the-state-of-html5-audio">sucks all around</a>.
	The good news is that it was pretty easy to hack in a fix on iPad and make audio work beautifully.
</p>

<p>
	The trick to getting responsive audio on iPad via HTML5 was to create a bridge from JavaScript to Objective-C.
	I'll post a more detailed tutorial in the future (here's <a href="http://www.lostdecadegames.com/rss.xml">our RSS feed</a> to get updates), but it looks something like this:
</p>

<div class="highlight"><pre><code class="language-objc" data-lang="objc">- (BOOL) webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {

	NSString *requestString = [[request URL] absoluteString];
	NSArray *components = [requestString componentsSeparatedByString:@&quot;://&quot;];

	if (([components count] &gt; 1)
		&amp;&amp; [(NSString *)[components objectAtIndex:0] isEqualToString:@&quot;jsbridge&quot;]) {

		if ([(NSString *)[components objectAtIndex:1] isEqualToString:@&quot;battle_music&quot;]) {
			// Play battle music here
		}
		return NO;
	}

	// Let any other request through
	return YES;
}</code></pre></div>

<p>
	Then in your JavaScript you'd send a request to <code>"jsbridge://battle_music";</code>.
	The device detects this request, parses it, plays an audio file and cancels the request.
</p>

<a class="before" href="http://www.flickr.com/photos/50655575@N03/5533389725/">
	<img alt="Onslaught! Arena on iPad" src="http://farm6.static.flickr.com/5135/5533389725_9ac20fb8f8_m.jpg">
</a>

<p>
	So there's a workaround; audio is not the bottleneck. The problem with getting <em>our</em> game onto iOS is <strong>speed</strong>.
	As you can see in
	<a href="http://www.flickr.com/photos/50655575@N03/sets/72157624619472766/with/5533389893/">some of these screenshots</a>
	of our game running in the iPad simulator, the <a href="http://en.wikipedia.org/wiki/Frame_rate">frames per second</a> (FPS) is severely lacking.
</p>

<p>
	Movies play at 24 FPS, TV plays at about 30 FPS.
	Modern video games probably run at 60 FPS or more.
	While taking screenshots of <strong>Onslaught! Arena</strong>, I did notice it can run as high as <a href="http://www.flickr.com/photos/50655575@N03/5533389405/">59 FPS</a>,
	but it's bursty and doesn't last.
	Most of the screenshots are more depressing, showing the game running at about <a href="http://www.flickr.com/photos/50655575@N03/5533972328/">7 FPS</a>, which is completely unplayable for an arcade game like ours.
	Plus, as you can see I've removed the extra pixel drawing of the arena itself: the screen is just plain black and it's still unacceptably slow.
</p>

<p>
	This speed problem is the <em>only</em> thing keeping us from having a playable game on any iOS device.
	So Apple, Google, all of you WebKit supporters and browser makers: please make things run faster. Lotta love for ya, we just want more speed!
</p>


	<p>
		<a class="download-podcast" href="http://twitter.com/richtaur">Follow author @richtaur</a>
	</p>
</div>

<div class="section text">
	
		<div class="module">
	<!-- Begin Disqus comments -->
	<div id="disqus_thread"></div>
	<script type="text/javascript">
		var disqus_shortname = "lostdecadegames";
		var disqus_identifier = "/what-we-need-to-get-our-html5-game-on-ipad-sp";
		var disqus_url = "http://www.lostdecadegames.com/what-we-need-to-get-our-html5-game-on-ipad-sp";
		/* * * DON'T EDIT BELOW THIS LINE * * */
		(function() {
			var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
			(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		})();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	<!-- End Disqus comments -->
</div>

	
</div>


<div id="ft">
	<p>
		Lost Decade Games © 2015
		• <a href="/blog/">Blog</a>
		• <a href="/about/tos/">Terms of Service</a>
		• <a href="/about/video-policy/">Video Policy</a>
	</p>
</div>

	<!-- Begin Google Analytics -->
<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-16927444-7']);
	_gaq.push(['_trackPageview']);
	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
<!-- End Google Analytics -->

</body>
</html>
