<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Obfuscating JavaScript with Closure Compiler Advanced Optimizations - Lost Decade Games</title>
	<meta name="description" content="Official website of Lost Decade Games, an independent HTML5 game company in Silicon Valley, CA.">
	<meta name="keywords" content="html5 games, javascript, chrome webstore, game dev, open source, blog, git, github, lost decade games, matt hackett, richtaur, geoff blair, gosub, zylo">
	<link rel="alternate" type="application/atom+xml" title="ATOM Feed for Lost Decade Games" href="http://www.lostdecadegames.com/rss.xml">
	<link rel="shortcut icon" href="/favicon.ico">
	<link rel="stylesheet" type="text/css" href="/media/css/combo.css?v1">
</head>
<body>
	<div id="hd">
	<h1>
		<a href="/">Lost Decade Games</a>
	</h1>
	<ul id="nav">
		<li><a href="/about/">About</a></li>
		<li><a href="/lostcast/">Lostcast</a></li>
		<li><a href="http://forum.lostdecadegames.com/">Forum</a></li>
		<li><a class="focal-point" href="http://www.wizardslizard.com/">A Wizard's Lizard</a></li>
	</ul>
</div>

<ul id="social">
	<li><a class="youtube" href="http://www.youtube.com/LostDecadeGames" title="YouTube">YouTube</a></li>
	<!--li><a class="apple" href="http://itunes.apple.com/us/podcast/lostcast/id481950724" title="iTunes">iTunes</a></li-->
	<li><a class="twitter" href="https://twitter.com/LostDecadeGames" title="Twitter">Twitter</a></li>
	<li><a class="email" href="/mailing-list/" title="Mailing List">Mailing List</a></li>
	<li><a class="rss" href="/rss.xml" title="RSS">RSS</a></li>
</ul>

<!-- Author -->

	


<!-- Splash -->

	


<div class="splash laptop">
	<div>
		<h2>Obfuscating JavaScript with Closure Compiler Advanced Optimizations</h2>
		<em>by Geoff Blair, 2010 Nov 17</em>
	</div>
</div>

<div class="section text blog">
<p>While working on our upcoming game, Onslaught! Arena, we wanted to obfuscate the JavaScript code as much as possible. Using tools like <a href="http://developer.yahoo.com/yui/compressor/">YUICompressor</a> and <a href="http://code.google.com/closure/compiler/">Google Closure Compiler</a> (with Standard Optimizations) just weren’t enough. Luckily, Closure Complier has an “<a href="http://code.google.com/closure/compiler/docs/api-tutorial3.html">Advanced Optimizations</a>” mode. This mode will really make your JavaScript gross and unreadable!</p>

<p>Here are some cases to watch out for along with some tips for those trying to make their JavaScript as unreadable as possible:</p>

<h2 id="dont-access-object-properties-as-string-literals">Don’t access object properties as string literals</h2>

<p>Using Advanced Optimizations has its <a href="http://code.google.com/closure/compiler/docs/api-tutorial3.html#dangers">pitfalls</a>. Because of it’s super aggressive renaming, Closure Compiler will <strong>break your code</strong> if you access object properties using string literals. For example:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js">var thing.stuff = {
	foo: 10,
	bar: 20
};

// This will break after Advanced Optimization :(
var foo = thing[&quot;stuff&quot;].foo;</code></pre></div>

<p>Closure will rewrite <code>thing.stuff</code> as something like <code>a.b</code> and accessing <code>a["stuff"]</code> isn’t going to work.</p>

<h2 id="dont-use-string-literals">Don’t use string literals</h2>

<p>Closure Compiler won’t obfuscate string literals for obvious reasons so just stay away from them as much as you can! Here’s an example:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js">// Bad. Can&#39;t obfuscate well.
myObject.state = &quot;wounded&quot;;

// Good!
var States = {
	Wounded: 0,
	Stunned: 1,
	Attacking: 2
};
myObject.state = States.Wounded;</code></pre></div>

<p>Instead of seeing <code>a.b = "wounded";</code> in your compiled code, you’ll get something like <code>a.b = c.d;</code>.</p>

<h2 id="stay-away-from-built-in-javascript-object-property-names">Stay away from built-in JavaScript object property names</h2>

<p>If you want to achieve maximum obfuscation, don’t use built-in JavaScript object properties such as <code>.position</code>, <code>.left</code> or <code>.width</code> in your custom objects. Here’s an example:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js">// Bad; &quot;type&quot; and &quot;position&quot; won&#39;t be obfuscated.
myObject.type = 1;
myObject.position = {x: 0, y: 1};

// Better; &quot;thing&quot; and &quot;coords&quot; will be obfuscated.
myObject.thing = 1;
myObject.coords = {x: 0, y: 1};</code></pre></div>

<p>The list of properties such as in this example is pretty long and many of them are common, sensible names for properties. I’m certainly not recommending that you stop using all of them. Find the balance that makes sense to you but keep in mind the more you can refrain from using these properties, the more obfuscated your code will be.</p>

<p>Here’s an (incomplete!) list of properties that won’t be obfuscated:</p>

<div class="highlight"><pre><code class="language-js" data-lang="js">add, canvas, create, data, direction, display, execute, height, history, images, layers, left, load, loop, map, normalize, now, paused, play, position, reset, scale, setInterval, setTimeout, size, start, stop, style, top, type, update, view, width, x, y</code></pre></div>

<p>These are the lessons we’ve learned while obfuscating our code as much as possible to help protect our work. Can you think of any additional best practices to assist in this process?</p>



	<p>
		<a class="download-podcast" href="http://twitter.com/geoffblair">Follow author @geoffblair</a>
	</p>
</div>

<div class="section text">
	
		<div class="module">
	<!-- Begin Disqus comments -->
	<div id="disqus_thread"></div>
	<script type="text/javascript">
		var disqus_shortname = "lostdecadegames";
		var disqus_identifier = "/obfuscating-javascript-with-closure-compiler";
		var disqus_url = "http://www.lostdecadegames.com/obfuscating-javascript-with-closure-compiler";
		/* * * DON'T EDIT BELOW THIS LINE * * */
		(function() {
			var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
			dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
			(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
		})();
	</script>
	<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	<!-- End Disqus comments -->
</div>

	
</div>


<div id="ft">
	<p>
		Lost Decade Games © 2015
		• <a href="/blog/">Blog</a>
		• <a href="/about/tos/">Terms of Service</a>
		• <a href="/about/video-policy/">Video Policy</a>
	</p>
</div>

	<!-- Begin Google Analytics -->
<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-16927444-7']);
	_gaq.push(['_trackPageview']);
	(function() {
		var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script>
<!-- End Google Analytics -->

</body>
</html>
